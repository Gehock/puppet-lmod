#!/bin/csh
# -*- shell-script -*-
########################################################################
#  This is the system wide source file for setting up
#  modules:
#
########################################################################

set MY_NAME="<%= @prefix %>/lmod/lmod/init/cshrc"



if ( ! $?MODULEPATH_ROOT ) then
    if ( $?USER) then
        setenv USER $LOGNAME
    endif

    set UNAME = `uname`
    setenv LMOD_sys    $UNAME

    setenv LMOD_arch   `uname -m`
    if ( "x$UNAME" == xAIX ) then
        setenv LMOD_arch   rs6k
    endif

    setenv TARG_TITLE_BAR_PAREN " "
    setenv LMOD_FULL_SETTARG_SUPPORT no
    setenv LMOD_SETTARG_CMD     :
    setenv LMOD_COLORIZE        yes
    setenv LMOD_PREPEND_BLOCK   normal
    setenv MODULEPATH_ROOT      "<%= @_modulepath_root %>"
<% @modulepaths.each do |modulepath| -%>
    setenv MODULEPATH           `<%= @prefix %>/lmod/lmod/libexec/addto --append MODULEPATH $MODULEPATH_ROOT/<%= modulepath %>`
<% end -%>
    setenv MODULEPATH           `<%= @prefix %>/lmod/lmod/libexec/addto --append MODULEPATH <%= @prefix %>/lmod/lmod/modulefiles/Core`
    setenv BASH_ENV <%= @prefix %>/lmod/lmod/init/bash
<% if @lmod_package_path -%>
    setenv LMOD_PACKAGE_PATH ${MODULEPATH_ROOT}/Site
<% end -%>

<% if @default_module -%>
    setenv LMOD_SYSTEM_DEFAULT_MODULES <%= @default_module %>
    module --initial_load restore
<% end -%>
endif

if ( -f  <%= @prefix %>/lmod/lmod/init/csh  ) then
  source <%= @prefix %>/lmod/lmod/init/csh
endif

<% if @default_module -%>
if ( ! $?__Init_Default_Modules ) then
   setenv __Init_Default_Modules 1
   module load <%= @default_module %>
endif
<% end -%>
