<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Puppet Class: lmod
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "puppet_classes::lmod";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../puppet_class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (l)</a> &raquo;
    <span class='title'><span class='object_link'>Puppet Classes</span></span>
     &raquo; 
    <span class="title">lmod</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="../puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Puppet Class: lmod</h1>
<div class="box_info">
  
  
  <dl>
    <dt>Defined in:</dt>
    <dd>
      manifests/init.pp
    </dd>
  </dl>
</div>

  <h2>Summary</h2>
  Manage Lmod

<h2>Overview</h2>
<div class="docstring">
  <div class="discussion">
    
  </div>
</div>


<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>To install Lmod from existing package repositories</p>
</div></p>
      
      <pre class="example code"><code>class { &#39;lmod&#39;:
   lmod_package_from_repo =&gt; true,
 }</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ensure</span>
      
      
        <span class='type'>(<tt>Enum['present','absent']</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;present&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The ensure parameter for this module. If set to &#39;absent&#39;, managed
files are removed. If lmod_package_from_repo is true and ensure is
&#39;absent&#39;, then the lmod package is also removed.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>package_ensure</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;present&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The ensure value for Lmod package. Only applies when lmod_package_from_repo
is true.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>prefix</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/opt/apps&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The prefix used when lmod was compiled.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>lmod_package_from_repo</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Should the lmod package be installed from a apt/yum repository, or is it
installed separately with only dependencies installed from package repos?</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>manage_epel</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Boolean that determines if EPEL should be mananged by this module for
systems installing Lmod via yum.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>package_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;Lmod&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Lmod package name if lmod_package_from_repo is true.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>base_packages</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Packages necessary to build and use Lmod, only installed if
lmod_package_from_repo is false</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>runtime_packages</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Lmod runtime package dependencies, only installed if lmod_package_from_repo
is false</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>build_packages</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Lmod runtime devel package dependencies, only installed if
manage_build_packages is true</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>modulepath_root</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::Absolutepath]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The modulepath for your lmod installation. Default is &#39;UNSET&#39;. If
the value is &#39;UNSET&#39; then the path $prefix/modulefiles is used.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>modulepaths</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[&#39;$LMOD_sys&#39;, &#39;Core&#39;]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An Array of modulepaths to be defined in the module.sh and module.csh.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>set_lmod_package_path</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Boolean that determines if the LMOD_PACKAGE_PATH environment variable
should be set in modules.sh and modules.csh.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>lmod_package_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;$MODULEPATH_ROOT/Site&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Value given to the LMOD_PACKAGE_PATH environment variable in modules.sh and
modules.csh.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>set_default_module</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Boolean will disable the management of the files that define the default
module.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>default_module</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;StdEnv&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The name of the default module to be loaded when users login. This will not
be set if set_default_module is false.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>avail_styles</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[&#39;system&#39;]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An Array used to set the LMOD_AVAIL_STYLES environment variable. An empty
Array prevents this environment variable from being set.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>lmod_admin_file</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::Absolutepath]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Defines path used for LMOD_ADMIN_FILE.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>system_name</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Value used for LMOD_SYSTEM_NAME.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>site_name</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Value used for LMOD_SITE_NAME.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>cached_loads</span>
      
      
        <span class='type'>(<tt>Optional[Boolean]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Value used for LMOD_CACHED_LOADS.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>manage_build_packages</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Boolean that determines if the packages necessary to build lmod should be
managed.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>modules_bash_path</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/profile.d/modules.sh&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>modules_bash_template</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;lmod/modules.sh.erb&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>modules_bash_source</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>modules_csh_path</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/profile.d/modules.csh&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>modules_csh_template</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;lmod/modules.csh.erb&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>modules_csh_source</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>stdenv_bash_template</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;lmod/z00_StdEnv.sh.erb&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>stdenv_bash_source</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>stdenv_csh_path</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/etc/profile.d/z00_StdEnv.csh&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>stdenv_csh_template</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;lmod/z00_StdEnv.csh.erb&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>stdenv_csh_source</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
</ul>


</div><div class="method_details_list">
  <table class="source_code">
    <tr>
      <td>
        <pre class="lines">


56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145</pre>
      </td>
      <td>
        <pre class="code"><span class="info file"># File 'manifests/init.pp', line 56</span>

class lmod (
  Enum[&#39;present&#39;,&#39;absent&#39;] $ensure                  = &#39;present&#39;,
  String $package_ensure                            = &#39;present&#39;,
  Stdlib::Absolutepath $prefix                      = &#39;/opt/apps&#39;,
  Boolean $lmod_package_from_repo                   = false,
  Boolean $manage_epel                              = true,
  String $package_name                              = &#39;Lmod&#39;,
  Array $base_packages                              = [],
  Array $runtime_packages                           = [],
  Array $build_packages                             = [],
  Optional[Stdlib::Absolutepath] $modulepath_root   = undef,
  Array $modulepaths                                = [&#39;$LMOD_sys&#39;, &#39;Core&#39;],
  Boolean $set_lmod_package_path                    = true,
  String $lmod_package_path                         = &#39;$MODULEPATH_ROOT/Site&#39;,
  Boolean $set_default_module                       = true,
  String $default_module                            = &#39;StdEnv&#39;,
  Array $avail_styles                               = [&#39;system&#39;],
  Optional[Stdlib::Absolutepath] $lmod_admin_file   = undef,
  Optional[String] $system_name                     = undef,
  Optional[String] $site_name                       = undef,
  Optional[Boolean] $cached_loads                   = undef,
  Boolean $manage_build_packages                    = false,
  Stdlib::Absolutepath $modules_bash_path           = &#39;/etc/profile.d/modules.sh&#39;,
  String $modules_bash_template                     = &#39;lmod/modules.sh.erb&#39;,
  Optional[String] $modules_bash_source             = undef,
  Stdlib::Absolutepath $modules_csh_path            = &#39;/etc/profile.d/modules.csh&#39;,
  String $modules_csh_template                      = &#39;lmod/modules.csh.erb&#39;,
  Optional[String] $modules_csh_source              = undef,
  String $stdenv_bash_template                      = &#39;lmod/z00_StdEnv.sh.erb&#39;,
  Optional[String] $stdenv_bash_source              = undef,
  Stdlib::Absolutepath $stdenv_csh_path             = &#39;/etc/profile.d/z00_StdEnv.csh&#39;,
  String $stdenv_csh_template                       = &#39;lmod/z00_StdEnv.csh.erb&#39;,
  Optional[String] $stdenv_csh_source               = undef,
) {

  case $ensure {
    &#39;present&#39;: {
      $_file_ensure = &#39;present&#39;
    }
    &#39;absent&#39;: {
      $_file_ensure = &#39;absent&#39;
    }
    default: {
      # Do nothing
    }
  }

  $_modulepath_root = $modulepath_root ? {
    Undef   =&gt; &quot;${prefix}/modulefiles&quot;,
    default =&gt; $modulepath_root,
  }

  if $modules_bash_source {
    $_modules_bash_source   = $modules_bash_source
    $_modules_bash_content  = undef
  } else {
    $_modules_bash_source   = undef
    $_modules_bash_content  = template($modules_bash_template)
  }

  if $modules_csh_source {
    $_modules_csh_source   = $modules_csh_source
    $_modules_csh_content  = undef
  } else {
    $_modules_csh_source   = undef
    $_modules_csh_content  = template($modules_csh_template)
  }

  if $stdenv_bash_source {
    $_stdenv_bash_source   = $stdenv_bash_source
    $_stdenv_bash_content  = undef
  } else {
    $_stdenv_bash_source   = undef
    $_stdenv_bash_content  = template($stdenv_bash_template)
  }

  if $stdenv_csh_source {
    $_stdenv_csh_source   = $stdenv_csh_source
    $_stdenv_csh_content  = undef
  } else {
    $_stdenv_csh_source   = undef
    $_stdenv_csh_content  = template($stdenv_csh_template)
  }

  anchor { &#39;lmod::start&#39;: }
  -&gt; class { &#39;lmod::install&#39;: }
  -&gt; class { &#39;lmod::load&#39;: }
  -&gt; anchor { &#39;lmod::end&#39;: }

}</pre>
      </td>
    </tr>
  </table>
</div>
</div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>